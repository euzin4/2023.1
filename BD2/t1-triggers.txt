1- se o produto em estoque chegar ao estoque mínimo de 10% então o mesmo deve ser inserido na tabela purchase (eid int, data date, actualValue). Deve-se ser criado a tabela purchase. 

select * into emin from stock;
alter table emin add column min int;

drop FUNCTION um();
create function um() returns void as $$
begin
	update emin set min = quantity * 0.1;
end;
$$ language 'plpgsql';

select um();
drop function um();

alter table emin drop column quantity;

\\-------------------terminar
drop FUNCTION um();
create function um() returns void as $$
declare
	min int;
begin
	min= select min from emin where eid=NEW.eid;
	RAISE NOTICE 'minimo é %', min;
end;
$$ language 'plpgsql';


2 - Se uma operação de incremento de stock for feito, a tabela purchase deve ser atualizada, ou seja, retirado o item para futuras compras ;

3- Para evitar problemas com uso indevido de medicamentos, crie uma tabela auxiliar de  controle para armazenar quem está comprando cada medicamento com a data e hora. Ou seja, usuário que solicitou (logou no sistema- usar o current_user), hora, eid (tabela Product). Note que a aplicação irá fazer o update na tabela stock. O trigger deve apenas monitorar e armazenar as informações requisitadas.
